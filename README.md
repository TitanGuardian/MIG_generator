# Код еще не рефакторился (можно наблюдать кошмары)! 

# MIG_generator
## Формат данных 
Каждая схема описывается 5-ю строками в текстовом файле.
1. Вектор-столбец функции переведенный в десятичную систему.
2. Класс схем, для MIG  это строка "mig" или "MIG"
3. Сложность схемы (количество элементов функции голосования)
4. Номер вершины выхода и флаг наличия отрицания (0 - нет отрицания, 1 - есть отрицание)
5. Последовательное описние вершин с помощью шестерок следующего типа: первые два числа определяют номер вершины, выход которой должен быть соединен с первым(самым левым) входом новой вершины, и флаг отрицания данного ребра (0 - нет, 1 - есть) аналогично для двух оставшихся входов (среднего и правого).
Изначально для каждой схемы определены 6 вершин, 0-ая вершина - константа 0, 1-5-ые вершины - входы схемы (x1~x5).


# Как использовать?

### Cоздание базы данных, и прогрузка уже существующей
```
BestSchemasDict ml("data");
```
### Клиент поиска мутаций (NPN)
```
SearchMutation sm;
```
## Обновление БД новыми схемами
Добавить в библиотеку текстовую базу MIG, при этом база будет содержать только лучшие реализации минкодов,
если реализован не минкод, то автоматически добавится схема соответсвующего минкода,
можно добавить 4 ый аргумент функции false, наличие которого будет сигналом для самостоятельного вычисления функции, которую
реализует реализует схема, взятая из текстового файла:
```
MIG::bunch_check_update("file_with_migs", ml,sm);
```

## Далее несколько примеров:
```
    // пример поиска по БД схем сложности 17
    // тип ml.dict --- std::map<uint32_t, MIG>, где ключ это минкод
    for (auto & el : ml.dict) {
        if (el.second.complexity == 17 ) {
            // поля у структуры можно посмотреть в файле mig.h
            std::cout<<el.second.vector<<"\n";
            // для вывода MIG есть метод to_string()
            std::cout<<el.second.to_string();
        }
    }
    // пример вывода статистики по сложностям; выводится в файл "название БД"_stat.txt
    ml.out_statistic("Message");
    // можно выгрузить БД в текстовый файл
    ml.save_to_txt("file_to_save.txt");

    // можно получить MIG любой функции (!!!если есть полная БД)
    auto mig = sm.get_MIG(123456789,ml);
    // узнать ее сложность
    mig.complexity;
    // или вывести в консоль
    std::cout << mig.to_string();
    // в конце программы обновленная БД сохранится
```
